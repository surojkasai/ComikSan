 [HttpPost("import-by-title")]
        public async Task<IActionResult> ImportByTitle([FromQuery] string title)
        {
            try
            {
                if (string.IsNullOrEmpty(title))
                    return BadRequest("Title is required");

                var results = await _mangaDexService.SearchMangaAsync(title);
                if (!results.Any())
                    return NotFound($"No manga found with title '{title}'");

                var importedComics = new List<Comic>();

                foreach (var manga in results.Take(3))
                {
                    // Check if already exists
                    if (_context.Comics.Any(c => c.MangaDexId == manga.MangaDexId))
                        continue;

                    // ✅ NEW: Get the actual cover filename for each manga
                    var coverFilename = await _mangaDexService.GetCoverFilenameAsync(manga.MangaDexId);
                    if (!string.IsNullOrEmpty(coverFilename))
                    {
                        manga.CoverImageUrl = $"https://uploads.mangadex.org/covers/{manga.MangaDexId}/{coverFilename}";
                        Console.WriteLine($"✅ Cover URL set for {manga.Title}: {manga.CoverImageUrl}");
                    }

                    _context.Comics.Add(manga);
                    importedComics.Add(manga);
                }

                if (importedComics.Any())
                {
                    await _context.SaveChangesAsync();
                    return Ok(new
                    {
                        message = $"✅ Imported {importedComics.Count} manga",
                        comics = importedComics
                    });
                }
                else
                {
                    return Conflict(new
                    {
                        message = "All searched manga already exist in database",
                        searchedTitles = results.Select(r => r.Title)
                    });
                }
            }
            catch (Exception ex)
            {
                return StatusCode(500, new
                {
                    error = "Failed to import manga",
                    details = ex.Message
                });
            }
        }